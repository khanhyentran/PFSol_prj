From 96939fab66448047b0547f594ff36589074a0ae8 Mon Sep 17 00:00:00 2001
From: root <khanh.tran.te@renesas.com>
Date: Thu, 9 Aug 2018 10:03:45 +0700
Subject: [PATCH] Add platform data for IMX219 camera

---
 arch/arm/mach-shmobile/board-rza2mevb.c | 24 ++++++++++++++++++++++--
 1 file changed, 22 insertions(+), 2 deletions(-)

diff --git a/arch/arm/mach-shmobile/board-rza2mevb.c b/arch/arm/mach-shmobile/board-rza2mevb.c
index 629b052..9949f65 100755
--- a/arch/arm/mach-shmobile/board-rza2mevb.c
+++ b/arch/arm/mach-shmobile/board-rza2mevb.c
@@ -4,7 +4,7 @@
 #include <linux/clk.h>
 #include <linux/of.h>
 #include <linux/io.h>
-
+#include <media/soc_camera.h> //RVC
 
 #define PFC_BASE_ADDR	0xFCFFE000
 void __iomem *PFC_BASE;
@@ -153,7 +153,11 @@ static int __init rza2mevb_init_early(void)
 	/* SDHI 0 */
 	pfc_set_pin_function(P5, 0, 3); // SD0_CD
 	pfc_set_pin_function(P5, 1, 3); // SD0_WP
-	
+
+	/*MIPI*/
+	pfc_set_pin_function(PD, 4, 1); // RIIC_SCL I2C channel 2
+	pfc_set_pin_function(PD, 5, 1); // RIIC_SDA I2C channel 2
+
 	/* Ethernet - RMII mode*/
 	/* Channel 0 */
 	pfc_set_pin_function(PE, 0, 7); /* REF50CK0 */
@@ -261,4 +265,20 @@ static int __init rza2mevb_init_late(void)
  * automatically be run at the end of kernel boot after all the drivers
  * have been loaded, but before the file system is mounted.
  */
+
+static struct soc_camera_subdev_desc imx219_subdev_desc = {
+        .power = 1,//imx219_subdev_power,
+        .sd_pdata = {
+                .regulators = 1,//imx219_subdev_regulators,
+                .num_regulators = 1,//ARRAY_SIZE(imx219_subdev_regulators),
+        },
+};
+
+static const struct i2c_board_info i2c2_devices[] __initconst = {
+	{
+		I2C_BOARD_INFO("imx219", 0x10),
+		.platform_data = &imx219_subdev_desc,
+	},
+};
+
 late_initcall(rza2mevb_init_late);
-- 
2.7.4

